import{j as e}from"./app.6LWIl6Tz.js";import{d as s,f as n}from"./vendor.Dilc0e1Z.js";function a({eventId:a,teamCount:l=8}){const t={UB1:{p1:{name:"TBD",score:""},p2:{name:"TBD",score:""},winner:null,loser:null},UB2:{p1:{name:"TBD",score:""},p2:{name:"TBD",score:""},winner:null,loser:null},UB3:{p1:{name:"TBD",score:""},p2:{name:"TBD",score:""},winner:null,loser:null},UB4:{p1:{name:"TBD",score:""},p2:{name:"TBD",score:""},winner:null,loser:null},UB5:{p1:{name:"TBD",score:""},p2:{name:"TBD",score:""},winner:null,loser:null},UB6:{p1:{name:"TBD",score:""},p2:{name:"TBD",score:""},winner:null,loser:null},UB7:{p1:{name:"TBD",score:""},p2:{name:"TBD",score:""},winner:null,loser:null},LB1:{p1:{name:"TBD",score:""},p2:{name:"TBD",score:""},winner:null,loser:null},LB2:{p1:{name:"TBD",score:""},p2:{name:"TBD",score:""},winner:null,loser:null},LB3:{p1:{name:"TBD",score:""},p2:{name:"TBD",score:""},winner:null,loser:null},LB4:{p1:{name:"TBD",score:""},p2:{name:"TBD",score:""},winner:null,loser:null},LB5:{p1:{name:"TBD",score:""},p2:{name:"TBD",score:""},winner:null,loser:null},LB6:{p1:{name:"TBD",score:""},p2:{name:"TBD",score:""},winner:null,loser:null},GF:{p1:{name:"TBD",score:""},p2:{name:"TBD",score:""},winner:null,loser:null}},[r,c]=s.useState(Array(l).fill("")),[m,o]=s.useState(t),[p,i]=s.useState(null),[B,d]=s.useState([]),[u,x]=s.useState(!1),[h,b]=s.useState(!1),[f,g]=s.useState(null),[U,j]=s.useState({p1:"",p2:""}),w=s.useRef({});s.useEffect(()=>{a&&fetch(route("double-elimination.show",{event:a})).then(e=>e.json()).then(e=>{if(e.matches){o({...t,...e.matches}),i(e.champion||null);const s=[e.matches.UB1?.p1?.name||"",e.matches.UB1?.p2?.name||"",e.matches.UB2?.p1?.name||"",e.matches.UB2?.p2?.name||"",e.matches.UB3?.p1?.name||"",e.matches.UB3?.p2?.name||"",e.matches.UB4?.p1?.name||"",e.matches.UB4?.p2?.name||""];c(s)}}).catch(e=>{})},[a]);const T=s=>{const n=m[s];return n?e.jsxs("div",{id:s,ref:e=>w.current[s]=e,className:"p-1.5 border rounded-lg bg-gray-800 text-white mb-2 w-36 sm:w-40 md:w-44 relative",children:[e.jsx("p",{className:"font-bold mb-0.5 text-[10px] sm:text-xs",children:s}),["p1","p2"].map(s=>e.jsxs("div",{className:`flex justify-between items-center mb-0.5 text-[10px] sm:text-xs ${n.winner===n[s]?.name?"bg-green-600":"bg-gray-700"} px-1.5 py-1 sm:py-0.5 rounded`,children:[e.jsx("span",{children:n[s]?.name??"TBD"}),e.jsx("span",{className:"ml-2",children:n[s]?.score||"-"})]},s)),"TBD"!==n.p1?.name&&"TBD"!==n.p2?.name&&e.jsx("button",{onClick:()=>(e=>{g(e),j({p1:m[e].p1.score||"",p2:m[e].p2.score||""}),b(!0)})(s),className:"px-2 py-1.5 sm:px-1 sm:py-0.5 bg-blue-600 hover:bg-blue-500 rounded font-medium text-[10px] sm:text-[9px] w-full mt-1 sm:mt-0.5 transition-colors",children:"Report Score"}),n.winner&&"TBD"!==n.winner&&e.jsxs("p",{className:"text-green-400 text-[10px] mt-0.5",children:["ðŸ† ",n.winner]})]}):null};return s.useLayoutEffect(()=>{requestAnimationFrame(()=>{const e=document.getElementById("bracket-container");if(!e)return;const s=[];[["UB1","UB5"],["UB2","UB5"],["UB3","UB6"],["UB4","UB6"],["UB5","UB7"],["UB6","UB7"],["UB7","GF"],["LB1","LB3"],["LB2","LB4"],["LB3","LB5"],["LB4","LB5"],["LB5","LB6"],["LB6","GF"]].forEach(([n,a])=>{const l=w.current[n],t=w.current[a];if(l&&t){const n=l.getBoundingClientRect(),a=t.getBoundingClientRect(),r=e.getBoundingClientRect(),c=n.right-r.left,m=n.top+n.height/2-r.top,o=a.left-r.left,p=a.top+a.height/2-r.top,i=c+30;s.push(`M${c},${m} H${i} V${p} H${o}`)}}),d(s)})},[m]),e.jsxs("div",{className:"bg-gray-900 min-h-screen p-2 md:p-6 text-white w-full max-w-[1800px] mx-auto overflow-x-auto",children:[e.jsxs("h1",{className:"text-xl font-bold text-center mb-4",children:[l,"-Team Double Elimination Bracket"]}),e.jsxs("div",{className:"flex gap-4 justify-center mb-6 flex-wrap",children:[r.map((s,n)=>e.jsx("input",{type:"text",value:s,onChange:e=>((e,s)=>{const n=[...r];n[e]=s,c(n)})(n,e.target.value),placeholder:`Team ${n+1}`,className:"px-2 py-1 rounded text-black"},n)),e.jsx("button",{onClick:()=>{const e={...t};e.UB1.p1.name=r[0]||"TBD",e.UB1.p2.name=r[1]||"TBD",e.UB2.p1.name=r[2]||"TBD",e.UB2.p2.name=r[3]||"TBD",e.UB3.p1.name=r[4]||"TBD",e.UB3.p2.name=r[5]||"TBD",e.UB4.p1.name=r[6]||"TBD",e.UB4.p2.name=r[7]||"TBD",o(e),i(null)},className:"px-4 py-1 bg-blue-600 rounded text-white font-bold",children:"Apply Teams"}),e.jsx("button",{onClick:()=>{o(t),c(Array(8).fill("")),i(null)},className:"px-4 py-1 bg-red-600 rounded text-white font-bold",children:"Reset"}),e.jsx("button",{onClick:()=>{a&&n.post(route("double-elimination.save"),{event_id:a,matches:m,champion:p},{preserveState:!0,onSuccess:()=>{x(!0),setTimeout(()=>x(!1),1500)}})},className:"px-4 py-1 bg-green-600 rounded text-white font-bold",children:"Save Bracket"})]}),e.jsxs("div",{id:"bracket-container",className:"relative",children:[e.jsx("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none",children:B.map((s,n)=>e.jsx("path",{d:s,stroke:"white",strokeWidth:"2",fill:"none"},n))}),e.jsxs("div",{className:"flex flex-col gap-4 sm:gap-6 min-w-max",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"font-bold text-sm mb-3",children:"Upper Bracket"}),e.jsxs("div",{className:"flex gap-4 sm:gap-6 md:gap-8 lg:gap-10",children:[e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[T("UB1"),T("UB2"),T("UB3"),T("UB4")]}),e.jsxs("div",{className:"mt-8",children:[T("UB5"),e.jsx("div",{className:"h-24"}),T("UB6")]}),e.jsx("div",{className:"mt-16",children:T("UB7")})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-sm mb-3",children:"Lower Bracket"}),e.jsxs("div",{className:"flex gap-4 sm:gap-6 md:gap-8 lg:gap-10",children:[e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[T("LB1"),T("LB2")]}),e.jsxs("div",{className:"mt-8 space-y-10",children:[T("LB3"),T("LB4")]}),e.jsx("div",{className:"mt-16",children:T("LB5")}),e.jsx("div",{className:"mt-16",children:T("LB6")})]})]}),e.jsxs("div",{className:"absolute left-1/2 sm:left-1/2 md:left-2/3 top-1/2 transform -translate-y-1/2",children:[T("GF"),p&&e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold text-yellow-400 mt-2 sm:mt-3 text-center",children:["ðŸ† ",p," ðŸ†"]})]})]})]}),u&&e.jsx("div",{className:"fixed bottom-10 left-1/2 transform -translate-x-1/2 bg-green-600 px-4 py-2 rounded shadow-lg",children:"Bracket Saved!"}),h&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 z-50",children:e.jsxs("div",{className:"bg-white text-black p-6 rounded-lg shadow-lg w-80",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4",children:["Report Score (",f,")"]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-semibold",children:m[f]?.p1?.name}),e.jsx("input",{type:"number",value:U.p1,onChange:e=>j({...U,p1:e.target.value}),className:"w-full border px-2 py-1 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold",children:m[f]?.p2?.name}),e.jsx("input",{type:"number",value:U.p2,onChange:e=>j({...U,p2:e.target.value}),className:"w-full border px-2 py-1 rounded"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>b(!1),className:"px-3 py-1 rounded bg-gray-400 text-white",children:"Cancel"}),e.jsx("button",{onClick:()=>{if(!f)return;const e={...m},s=e[f];if(s.p1.score=U.p1,s.p2.score=U.p2,"TBD"!==s.p1.name&&"TBD"!==s.p2.name&&s.p1.score!==s.p2.score){const n=parseInt(s.p1.score)>parseInt(s.p2.score)?"p1":"p2",a="p1"===n?"p2":"p1",l=s[n].name,t=s[a].name;switch(s.winner=l,s.loser=t,f){case"UB1":e.UB5.p1.name=l,e.LB1.p1.name=t;break;case"UB2":e.UB5.p2.name=l,e.LB1.p2.name=t;break;case"UB3":e.UB6.p1.name=l,e.LB2.p1.name=t;break;case"UB4":e.UB6.p2.name=l,e.LB2.p2.name=t;break;case"UB5":e.UB7.p1.name=l,e.LB3.p1.name=t;break;case"UB6":e.UB7.p2.name=l,e.LB4.p1.name=t;break;case"UB7":e.GF.p1.name=l,e.LB6.p2.name=t}switch(f){case"LB1":e.LB3.p2.name=l;break;case"LB2":e.LB4.p2.name=l;break;case"LB3":e.LB5.p1.name=l;break;case"LB4":e.LB5.p2.name=l;break;case"LB5":e.LB6.p1.name=l;break;case"LB6":e.GF.p2.name=l;break;case"GF":i(l)}}o(e),b(!1)},className:"px-3 py-1 rounded bg-blue-600 text-white font-bold",children:"Submit"})]})]})})]})}export{a as default};
