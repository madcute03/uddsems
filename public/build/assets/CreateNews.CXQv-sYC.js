import{j as e}from"./app.6LWIl6Tz.js";import{A as t}from"./AuthenticatedLayout.BA5uTxXo.js";import{e as s,u as l,H as a,d as r}from"./vendor.Dilc0e1Z.js";import"./transition.DRRNCHc7.js";const o=({value:t,onChange:s,label:l,placeholder:a="Select date"})=>{const[o,n]=r.useState(!1),[i,d]=r.useState(new Date),c=e=>{d(t=>{const s=new Date(t);return s.setMonth(t.getMonth()+e),s})},u=e=>!(!e||!t)&&e.toISOString().split("T")[0]===t,m=e=>{if(!e)return!1;const t=new Date;return e.toDateString()===t.toDateString()},x=(e=>{const t=e.getFullYear(),s=e.getMonth(),l=new Date(t,s,1),a=new Date(t,s+1,0).getDate(),r=l.getDay(),o=[];for(let n=0;n<r;n++)o.push(null);for(let n=1;n<=a;n++)o.push(new Date(t,s,n));return o})(i),b=i.toLocaleDateString("en-US",{month:"long",year:"numeric"});return e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block mb-1 text-slate-300",children:l}),e.jsxs("div",{className:"w-full bg-slate-800/60 border border-slate-700 text-slate-100 rounded-md px-3 py-2 cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-600/50 flex items-center justify-between",onClick:()=>n(!o),children:[e.jsx("span",{className:t?"text-slate-100":"text-slate-400",children:t?(h=t,h?new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):""):a}),e.jsx("svg",{className:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})]}),o&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 w-full bg-slate-800 border border-slate-700 rounded-md shadow-lg z-[60] p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{type:"button",onClick:()=>c(-1),className:"p-1 hover:bg-slate-700 rounded",children:e.jsx("svg",{className:"w-5 h-5 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h3",{className:"text-slate-100 font-medium",children:b}),e.jsx("button",{type:"button",onClick:()=>c(1),className:"p-1 hover:bg-slate-700 rounded",children:e.jsx("svg",{className:"w-5 h-5 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(t=>e.jsx("div",{className:"text-xs text-slate-400 text-center py-1 font-medium",children:t},t))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:x.map((t,l)=>e.jsx("button",{type:"button",onClick:()=>(e=>{if(e){const t=e.toISOString().split("T")[0];s(t),n(!1)}})(t),disabled:!t,className:`\n                                    h-8 text-sm rounded transition-colors\n                                    ${t?"":"invisible"}\n                                    ${u(t)?"bg-blue-600 text-white":m(t)?"bg-slate-600 text-slate-100 hover:bg-slate-500":"text-slate-300 hover:bg-slate-700"}\n                                `,children:t?.getDate()},l))})]}),o&&e.jsx("div",{className:"fixed inset-0 z-[55]",onClick:()=>n(!1)})]});var h},n=({value:t,onChange:s,label:l,placeholder:a="Select time"})=>{const[o,n]=r.useState(!1),[i,d]=r.useState(""),[c,u]=r.useState(""),[m,x]=r.useState("AM");r.useEffect(()=>{if(t){const[e,s]=t.split(":"),l=parseInt(e),a=l>=12?"PM":"AM";d((0===l?12:l>12?l-12:l).toString()),u(s),x(a)}},[t]);const b=(e,t,l)=>{const a=e||i,r=t||c,o=l||m;if(a&&r&&o){const e=((e,t,s)=>{let l=parseInt(e);return"AM"===s&&12===l?l=0:"PM"===s&&12!==l&&(l+=12),`${l.toString().padStart(2,"0")}:${t}`})(a,r,o);s(e)}},h=Array.from({length:12},(e,t)=>(t+1).toString()),p=Array.from({length:60},(e,t)=>t.toString().padStart(2,"0"));return e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block mb-1 text-slate-300",children:l}),e.jsxs("div",{className:"w-full bg-slate-800/60 border border-slate-700 text-slate-100 rounded-md px-3 py-2 cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-600/50 flex items-center justify-between",onClick:()=>n(!o),children:[e.jsx("span",{className:t?"text-slate-100":"text-slate-400",children:t?(g=i,f=c,v=m,g&&f&&v?`${g}:${f} ${v}`:""):a}),e.jsx("svg",{className:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),o&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 w-full bg-slate-800 border border-slate-700 rounded-md shadow-lg z-[60] p-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-400 mb-2",children:"Hour"}),e.jsx("div",{className:"max-h-32 overflow-y-auto border border-slate-600 rounded",children:h.map(t=>e.jsx("button",{type:"button",onClick:()=>{d(t),b(t,c,m)},className:`\n                                            w-full text-center py-1 hover:bg-slate-700 transition-colors\n                                            ${i===t?"bg-blue-600 text-white":"text-slate-300"}\n                                        `,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-400 mb-2",children:"Minute"}),e.jsx("div",{className:"max-h-32 overflow-y-auto border border-slate-600 rounded",children:p.map(t=>e.jsx("button",{type:"button",onClick:()=>{u(t),b(i,t,m)},className:`\n                                            w-full text-center py-1 hover:bg-slate-700 transition-colors\n                                            ${c===t?"bg-blue-600 text-white":"text-slate-300"}\n                                        `,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-400 mb-2",children:"Period"}),e.jsx("div",{className:"border border-slate-600 rounded",children:["AM","PM"].map(t=>e.jsx("button",{type:"button",onClick:()=>{x(t),b(i,c,t)},className:`\n                                            w-full text-center py-2 hover:bg-slate-700 transition-colors\n                                            ${m===t?"bg-blue-600 text-white":"text-slate-300"}\n                                        `,children:t},t))})]})]}),e.jsx("button",{type:"button",onClick:()=>n(!1),className:"w-full mt-3 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded transition-colors",children:"Done"})]}),o&&e.jsx("div",{className:"fixed inset-0 z-[55]",onClick:()=>n(!1)})]});var g,f,v},i=({news:t=[]})=>{const[s,l]=r.useState(!1),[a,i]=r.useState(null),[d,c]=r.useState({title:"",content:"",tags:"",published_date:"",published_time:"",location:"",author:"",cover_image:null,cover_image_preview:null}),[u,m]=r.useState(!1),[x,b]=r.useState(""),[h,p]=r.useState(""),g=e=>{const{name:t,value:s,files:l}=e.target;if("cover_image"===t){const e=l[0];c(t=>({...t,cover_image:e,cover_image_preview:e?URL.createObjectURL(e):t.cover_image_preview}))}else c(e=>({...e,[t]:s}))};return 0===t.length?e.jsxs("div",{className:"bg-slate-900/60 border border-slate-800 p-6 rounded-xl shadow-lg shadow-blue-950/30",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Created News"}),e.jsx("p",{className:"text-slate-400",children:"No news created yet."})]}):e.jsxs("div",{className:"bg-slate-900/60 border border-slate-800 p-6 rounded-xl shadow-lg shadow-blue-950/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Created News (",t.length,")"]}),e.jsx("button",{onClick:()=>l(!s),className:"text-blue-400 hover:text-blue-300 transition-colors",children:s?"Collapse":"Expand"})]}),h&&e.jsx("div",{className:"mb-4 p-3 bg-green-500/20 border border-green-500/50 text-green-300 rounded-md",children:h}),x&&e.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/50 text-red-300 rounded-md",children:x}),e.jsx("div",{className:`space-y-4 ${s?"max-h-96 overflow-y-auto":"max-h-32 overflow-hidden"} transition-all duration-300`,children:t.map(t=>e.jsx("div",{className:"border-b border-slate-700 pb-3 last:border-b-0",children:a===t.id?e.jsxs("form",{onSubmit:e=>(async(e,t)=>{e.preventDefault(),m(!0),b(""),p("");try{const e=new FormData;Object.entries(d).forEach(([t,s])=>{if("published_date"!==t&&"published_time"!==t&&"cover_image_preview"!==t)if("tags"===t){const t=s.split(",").map(e=>e.trim()).filter(e=>e);e.append("tags",t.join(","))}else"cover_image"===t&&s?e.append("cover_image",s):"published_date"===t&&s&&d.published_time?e.append("published_at",`${s}T${d.published_time}`):null!=s&&e.append(t,s)});const s=await fetch(`/news/${t}`,{method:"POST",headers:{"X-HTTP-Method-Override":"PUT","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json"},body:e});if(!s.ok){const e=await s.json();throw new Error(e.message||"Failed to update news")}p("News updated successfully!"),setTimeout(()=>window.location.reload(),1e3)}catch(s){b(s.message||"An error occurred while updating the news")}finally{m(!1)}})(e,t.id),className:"space-y-3",children:[e.jsx("div",{children:e.jsx("input",{type:"text",name:"title",value:d.title,onChange:g,className:"w-full border border-slate-600 bg-slate-700 text-white px-2 py-1 rounded text-sm focus:border-blue-500 focus:outline-none",placeholder:"Title",required:!0})}),e.jsx("div",{children:e.jsx("textarea",{name:"content",value:d.content,onChange:g,className:"w-full border border-slate-600 bg-slate-700 text-white px-2 py-1 rounded text-sm focus:border-blue-500 focus:outline-none",rows:"3",placeholder:"Content",required:!0})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Cover Image"}),e.jsx("input",{type:"file",name:"cover_image",onChange:g,accept:"image/*",className:"w-full text-xs text-slate-300 file:mr-3 file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:font-medium file:bg-slate-700 file:text-slate-300 hover:file:bg-slate-600"}),d.cover_image_preview&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:d.cover_image_preview,alt:"Preview",className:"h-20 w-20 object-cover rounded border border-slate-600"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(o,{label:"",value:d.published_date,onChange:e=>c({...d,published_date:e}),placeholder:"Select date"}),e.jsx(n,{label:"",value:d.published_time,onChange:e=>c({...d,published_time:e}),placeholder:"Select time"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",name:"author",value:d.author,onChange:g,className:"border border-slate-600 bg-slate-700 text-white px-2 py-1 rounded text-sm focus:border-blue-500 focus:outline-none",placeholder:"Author"}),e.jsx("input",{type:"text",name:"location",value:d.location,onChange:g,className:"border border-slate-600 bg-slate-700 text-white px-2 py-1 rounded text-sm focus:border-blue-500 focus:outline-none",placeholder:"Location"})]}),e.jsx("div",{children:e.jsx("input",{type:"text",name:"tags",value:d.tags,onChange:g,className:"w-full border border-slate-600 bg-slate-700 text-white px-2 py-1 rounded text-sm focus:border-blue-500 focus:outline-none",placeholder:"Tags (comma-separated)"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:u,className:"px-3 py-1 rounded text-sm transition-colors "+(u?"bg-blue-700 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"),children:u?"Saving...":"Save"}),e.jsx("button",{type:"button",onClick:()=>i(null),disabled:u,className:"px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white rounded text-sm transition-colors",children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-slate-100 mb-1",children:t.title}),e.jsx("p",{className:"text-sm text-slate-400 mb-2 line-clamp-2",children:t.content}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[t.published_at&&e.jsxs("span",{children:["ðŸ“… ",new Date(t.published_at).toLocaleDateString()]}),t.author&&e.jsxs("span",{children:["ðŸ‘¤ ",t.author]}),t.location&&e.jsxs("span",{children:["ðŸ“ ",t.location]})]}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:(Array.isArray(t.tags)?t.tags:t.tags.split(",")).map((t,s)=>e.jsx("span",{className:"px-2 py-0.5 bg-blue-500/20 text-blue-300 text-xs rounded",children:"string"==typeof t?t.trim():t},s))})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[t.cover_image&&e.jsx("img",{src:`/storage/${t.cover_image}`,alt:"Cover",className:"w-16 h-16 object-cover rounded"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{onClick:()=>(e=>{i(e.id),c({title:e.title||"",content:e.content||"",tags:Array.isArray(e.tags)?e.tags.join(", "):e.tags||"",published_date:e.published_at?e.published_at.split("T")[0]:"",published_time:e.published_at?e.published_at.split("T")[1]?.substring(0,5):"",location:e.location||"",author:e.author||"",cover_image:null,cover_image_preview:e.cover_image?`/storage/${e.cover_image}`:null}),b(""),p("")})(t),className:"px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs transition-colors",disabled:u,children:"Edit"}),e.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this news item?")){m(!0),b(""),p("");try{const t=await fetch(`/news/${e}`,{method:"POST",headers:{"X-HTTP-Method-Override":"DELETE","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json","Content-Type":"application/json"}});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to delete news")}p("News deleted successfully!"),setTimeout(()=>window.location.reload(),1e3)}catch(t){b(t.message||"An error occurred while deleting the news")}finally{m(!1)}}})(t.id),className:"px-2 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-xs transition-colors",disabled:u,children:u?"Deleting...":"Delete"})]})]})]})},t.id))}),!s&&t.length>2&&e.jsx("div",{className:"text-center mt-3",children:e.jsxs("button",{onClick:()=>l(!0),className:"text-blue-400 hover:text-blue-300 text-sm transition-colors",children:["View all ",t.length," news items"]})})]})};function d(){const{news:r=[]}=s().props,{data:d,setData:c,post:u,processing:m,reset:x,errors:b}=l({title:"",content:"",category:"",tags:"",published_date:"",published_time:"",location:"",author:"",cover_image:null});return e.jsxs(t,{children:[e.jsx(a,{title:"Create News"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto max-w-4xl sm:px-6 lg:px-8 space-y-6 text-slate-100",children:[e.jsxs("div",{className:"bg-slate-900/60 border border-slate-800 p-6 rounded-xl shadow-lg shadow-blue-950/30",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Create News"}),e.jsx("div",{className:"flex items-center gap-3"})]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault();const t=new FormData;Object.keys(d).forEach(e=>{"cover_image"===e?d.cover_image&&t.append("cover_image",d.cover_image):"published_date"===e||"published_time"===e||null!==d[e]&&""!==d[e]&&t.append(e,d[e])}),d.published_date&&d.published_time&&t.append("published_at",`${d.published_date}T${d.published_time}`),u(route("news.store"),t,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{x(),window.scrollTo(0,0)}})},className:"mt-4 space-y-4",encType:"multipart/form-data",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-slate-300",children:"Title / Headline"}),e.jsx("input",{type:"text",value:d.title,onChange:e=>c("title",e.target.value),className:"w-full bg-slate-800/60 border border-slate-700 text-slate-100 placeholder-slate-400 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-600/50",required:!0}),b.title&&e.jsx("p",{className:"text-red-300 text-sm mt-1",children:b.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-slate-300",children:"Cover Image (optional)"}),e.jsx("input",{type:"file",accept:"image/*",onChange:e=>{c("cover_image",e.target.files[0]||null)},className:"w-full bg-slate-800/60 border border-slate-700 text-slate-100 rounded-md file:mr-3 file:py-2 file:px-3 file:rounded-md file:border-0 file:bg-slate-700 file:text-slate-100 hover:file:bg-slate-600"}),b.cover_image&&e.jsx("p",{className:"text-red-300 text-sm mt-1",children:b.cover_image}),d.cover_image&&e.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[e.jsx("img",{src:d.cover_image instanceof File?URL.createObjectURL(d.cover_image):d.cover_image,alt:"Cover preview",className:"h-24 w-24 object-cover rounded border border-white/20"}),e.jsx("button",{type:"button",onClick:()=>c("cover_image",null),className:"btn-blue-glow",children:"Remove"})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Recommended: JPG/PNG up to 4MB."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-slate-300",children:"Content / Description"}),e.jsx("textarea",{value:d.content,onChange:e=>c("content",e.target.value),rows:6,className:"w-full bg-slate-800/60 border border-slate-700 text-slate-100 placeholder-slate-400 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-600/50",required:!0}),b.content&&e.jsx("p",{className:"text-red-300 text-sm mt-1",children:b.content})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-slate-300",children:"Category"}),e.jsx("input",{type:"text",value:d.tags,onChange:e=>c("tags",e.target.value),placeholder:"e.g. Announcement, Sports, Campus",className:"w-full bg-slate-800/60 border border-slate-700 text-slate-100 placeholder-slate-400 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-600/50"})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(o,{label:"Date",value:d.published_date,onChange:e=>c("published_date",e),placeholder:"Select publication date"})}),e.jsx("div",{children:e.jsx(n,{label:"Time",value:d.published_time,onChange:e=>c("published_time",e),placeholder:"Select publication time"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-slate-300",children:"Location / Venue"}),e.jsx("input",{type:"text",value:d.location,onChange:e=>c("location",e.target.value),className:"w-full bg-slate-800/60 border border-slate-700 text-slate-100 placeholder-slate-400 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-600/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-slate-300",children:"Organizer / Author"}),e.jsx("input",{type:"text",value:d.author,onChange:e=>c("author",e.target.value),className:"w-full bg-slate-800/60 border border-slate-700 text-slate-100 placeholder-slate-400 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-600/50"})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[e.jsx("button",{type:"submit",disabled:m,className:"w-[131px] h-[45px] rounded-[15px] cursor-pointer \n                                                               transition duration-300 ease-in-out \n                                                               bg-gradient-to-br from-[#2e8eff] to-[#2e8eff]/0 \n                                                               bg-[#2e8eff]/20 flex items-center justify-center \n                                                               hover:bg-[#2e8eff]/70 hover:shadow-[0_0_10px_rgba(46,142,255,0.5)] \n                                                               focus:outline-none focus:bg-[#2e8eff]/70 focus:shadow-[0_0_10px_rgba(46,142,255,0.5)]",children:m?"Saving...":"Create News"}),e.jsx("button",{type:"button",onClick:()=>x(),className:"w-[131px] h-[45px] rounded-[15px] cursor-pointer \n                                                               transition duration-300 ease-in-out \n                                                               bg-gradient-to-br from-[#ff0000] to-[#ff0000]/0 \n                                                               bg-[#ff0000]/20 flex items-center justify-center \n                                                               hover:bg-[#ff0000]/70 hover:shadow-[0_0_10px_rgba(46,142,255,0.5)] \n                                                               focus:outline-none focus:bg-[#ff0000]/70 focus:shadow-[0_0_10px_rgba(46,142,255,0.5)]",children:"Reset"})]})]})]}),e.jsx(i,{news:r})]})})]})}export{d as default};
