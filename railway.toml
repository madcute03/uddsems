# railway.toml

[project]
name = "sems-app"  # Change to your project name

[build]
# Backend (Laravel) build
buildCommand = "composer install --no-dev --optimize-autoloader && php artisan key:generate"

# Frontend build (React + Vite)
installCommand = "npm ci && npm run build"
startCommand = "php artisan serve --host=0.0.0.0 --port=$PORT"

[env]
APP_ENV = "production"
APP_DEBUG = "false"
APP_KEY = ""  # Will be generated by key:generate
APP_URL = "https://your-railway-domain.up.railway.app"

DB_CONNECTION = "mysql"
DB_HOST = ""  # Railway Postgres / MySQL host
DB_PORT = "3306"
DB_DATABASE = ""
DB_USERNAME = ""
DB_PASSWORD = ""

VITE_APP_NAME = "SEMS"

[deploy]
# Automatically build both PHP and Node
commands = [
  "composer install --no-dev --optimize-autoloader",
  "npm ci --omit=dev",
  "npm run build",
  "php artisan migrate --force",
  "php artisan optimize"
]

[plugins]
# Example for MySQL plugin on Railway
# Add a MySQL plugin from Railway dashboard and link it
